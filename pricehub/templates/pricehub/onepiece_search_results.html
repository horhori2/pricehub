{% extends 'pricehub/base.html' %}

{% block title %}{{ query }} ê²€ìƒ‰ ê²°ê³¼ - ì›í”¼ìŠ¤ ì¹´ë“œ{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <a href="{% url 'pricehub:onepiece_expansion_list' %}">ì›í”¼ìŠ¤ í™•ì¥íŒ© ëª©ë¡</a> &gt; ê²€ìƒ‰ ê²°ê³¼
</div>
{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <h2>ğŸ” "{{ query }}" ê²€ìƒ‰ ê²°ê³¼</h2>
    <p style="color: #666; margin-top: 10px;">ì´ {{ count }}ê°œì˜ ì¹´ë“œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.</p>
</div>

{% if count > 0 %}
<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
        <thead style="background: #667eea; color: white;">
            <tr>
                <th style="padding: 15px; text-align: left;">í™•ì¥íŒ©</th>
                <th style="padding: 15px; text-align: left;">ì¹´ë“œë²ˆí˜¸</th>
                <th style="padding: 15px; text-align: left;">ì´ë¯¸ì§€</th>
                <th style="padding: 15px; text-align: left;">ì¹´ë“œëª…</th>
                <th style="padding: 15px; text-align: center;">ë ˆì–´ë„</th>
                <th style="padding: 15px; text-align: right;">ì¼ë°˜ ìµœì €ê°€</th>
                <th style="padding: 15px; text-align: right;">TCG999</th>
                <th style="padding: 15px; text-align: center;">ìƒì„¸</th>
            </tr>
        </thead>
        <tbody>
            {% for card in cards %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px;">
                    <a href="{% url 'pricehub:onepiece_card_list' card.expansion.code %}" 
                       style="color: #667eea; text-decoration: none; font-weight: 500;">
                        {{ card.expansion.name }}
                    </a>
                    <br>
                    <span style="font-size: 0.8em; color: #999;">{{ card.expansion.code }}</span>
                </td>
                <td style="padding: 15px;">{{ card.card_number }}</td>
                <td style="padding: 15px;">
                    {% if card.image_url %}
                    <img src="{{ card.image_url }}" alt="{{ card.name }}" 
                         style="width: 60px; height: 80px; object-fit: cover; border-radius: 5px;">
                    {% else %}
                    <div style="width: 60px; height: 80px; background: #f0f0f0; border-radius: 5px; display: flex; align-items: center; justify-content: center;">
                        ğŸ´â€â˜ ï¸
                    </div>
                    {% endif %}
                </td>
                <td style="padding: 15px;">
                    <span style="font-weight: 500;">{{ card.name }}</span>
                </td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background: #f0f0f0; padding: 5px 10px; border-radius: 3px; font-size: 0.9em;">
                        {{ card.rarity }}
                    </span>
                </td>
                <td style="padding: 15px; text-align: right; font-weight: 500;">
                    {% if card.latest_general_price %}
                        {{ card.latest_general_price|floatformat:0 }}ì›
                        <br><span style="font-size: 0.8em; color: #999;">{{ card.latest_general_source }}</span>
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td style="padding: 15px; text-align: right; font-weight: 500; color: #667eea;">
                    {% if card.latest_tcg999_price %}
                        {{ card.latest_tcg999_price|floatformat:0 }}ì›
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td style="padding: 15px; text-align: center;">
                    <a href="{% url 'pricehub:onepiece_card_detail' card.id %}" class="btn" style="padding: 5px 15px; font-size: 0.9em;">
                        ğŸ“Š ì°¨íŠ¸
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card" style="text-align: center; padding: 60px 20px;">
    <div style="font-size: 4em; margin-bottom: 20px;">ğŸ”</div>
    <h3 style="margin-bottom: 10px; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
    <p style="color: #999;">ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.</p>
</div>
{% endif %}
{% endblock %}