{% extends 'pricehub/base.html' %}

{% block title %}{{ query }} ê²€ìƒ‰ ê²°ê³¼ - í¬ì¼“ëª¬ ì¹´ë“œ ê°€ê²©{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <a href="{% url 'pricehub:expansion_list' %}">í™•ì¥íŒ© ëª©ë¡</a> &gt; ê²€ìƒ‰ ê²°ê³¼
</div>
{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <h2>ğŸ” "{{ query }}" ê²€ìƒ‰ ê²°ê³¼</h2>
    <p style="color: #666; margin-top: 10px;">
        ì´ {{ count }}ê°œì˜ ì¹´ë“œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.
        {% if expansion_filter %}
            ({{ expansion_filter }} í™•ì¥íŒ©)
        {% endif %}
    </p>
    
    <!-- í™•ì¥íŒ©ë³„ ê·¸ë£¹ í‘œì‹œ (ì„ íƒì‚¬í•­) -->
    {% if count > 0 %}
    <div style="margin-top: 15px;">
        <p style="font-size: 0.9em; color: #999;">
            ğŸ’¡ íŠ¹ì • í™•ì¥íŒ© ë‚´ì—ì„œ ê²€ìƒ‰í•˜ë ¤ë©´ í™•ì¥íŒ© í˜ì´ì§€ì—ì„œ ê²€ìƒ‰í•˜ì„¸ìš”.
        </p>
    </div>
    {% endif %}
</div>

{% if count > 0 %}
<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
        <thead style="background: #667eea; color: white;">
            <tr>
                <th style="padding: 15px; text-align: left;">í™•ì¥íŒ©</th>
                <th style="padding: 15px; text-align: left;">ì¹´ë“œë²ˆí˜¸</th>
                <th style="padding: 15px; text-align: left;">ì´ë¯¸ì§€</th>
                <th style="padding: 15px; text-align: left;">ì¹´ë“œëª…</th>
                <th style="padding: 15px; text-align: center;">ë ˆì–´ë„</th>
                <th style="padding: 15px; text-align: right;">ì¼ë°˜ ìµœì €ê°€</th>
                <th style="padding: 15px; text-align: right;">TCG999</th>
                <th style="padding: 15px; text-align: center;">ìƒì„¸</th>
            </tr>
        </thead>
        <tbody>
            {% for card in cards %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px;">
                    <a href="{% url 'pricehub:card_list' card.expansion.code %}" 
                       style="color: #667eea; text-decoration: none; font-weight: 500;">
                        {{ card.expansion.name }}
                    </a>
                    <br>
                    <span style="font-size: 0.8em; color: #999;">{{ card.expansion.code }}</span>
                </td>
                <td style="padding: 15px;">{{ card.card_number }}</td>
                <td style="padding: 15px;">
                    {% if card.image_url %}
                    <img src="{{ card.image_url }}" alt="{{ card.name }}" 
                         style="width: 60px; height: 80px; object-fit: cover; border-radius: 5px;">
                    {% else %}
                    <div style="width: 60px; height: 80px; background: #f0f0f0; border-radius: 5px; display: flex; align-items: center; justify-content: center;">
                        ğŸ´
                    </div>
                    {% endif %}
                </td>
                <td style="padding: 15px;">
                    <span style="font-weight: 500;">{{ card.name }}</span>
                </td>
                <td style="padding: 15px; text-align: center;">
                    <span style="background: #f0f0f0; padding: 5px 10px; border-radius: 3px; font-size: 0.9em;">
                        {{ card.rarity }}
                    </span>
                </td>
                <td style="padding: 15px; text-align: right; font-weight: 500;">
                    {% if card.latest_general_price %}
                        {{ card.latest_general_price|floatformat:0 }}ì›
                        <br><span style="font-size: 0.8em; color: #999;">{{ card.latest_general_source }}</span>
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td style="padding: 15px; text-align: right; font-weight: 500; color: #667eea;">
                    {% if card.latest_tcg999_price %}
                        {{ card.latest_tcg999_price|floatformat:0 }}ì›
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td style="padding: 15px; text-align: center;">
                    <a href="{% url 'pricehub:card_detail' card.id %}" class="btn" style="padding: 5px 15px; font-size: 0.9em;">
                        ğŸ“Š ì°¨íŠ¸
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card" style="text-align: center; padding: 60px 20px;">
    <div style="font-size: 4em; margin-bottom: 20px;">ğŸ”</div>
    <h3 style="margin-bottom: 10px; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
    <p style="color: #999;">ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.</p>
</div>
{% endif %}
{% endblock %}
```

## ì‚¬ìš© ë°©ë²•

### 1. ì „ì²´ ê²€ìƒ‰ (í—¤ë” ê²€ìƒ‰ë°”)
```
ë©”ì¸ í˜ì´ì§€ í—¤ë” ê²€ìƒ‰ â†’ ëª¨ë“  í™•ì¥íŒ©ì—ì„œ ê²€ìƒ‰
ì˜ˆ: "í”¼ì¹´ì¸„" â†’ ëª¨ë“  í™•ì¥íŒ©ì˜ í”¼ì¹´ì¸„ ì¹´ë“œ
```

### 2. í™•ì¥íŒ© ë‚´ ê²€ìƒ‰
```
í™•ì¥íŒ© ì„ íƒ â†’ í™•ì¥íŒ© í˜ì´ì§€ ë‚´ ê²€ìƒ‰ë°” ì‚¬ìš©
ì˜ˆ: "ì¸í˜ë¥´ë…¸X" í™•ì¥íŒ© â†’ "í”¼ì¹´ì¸„" ê²€ìƒ‰ â†’ ì¸í˜ë¥´ë…¸Xì˜ í”¼ì¹´ì¸„ë§Œ